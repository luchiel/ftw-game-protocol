Базовый протокол
================

Формат запросов
---------------

Запрос отправляется методом GET, используя JSONP (в качестве callback-параметра используется GET параметр “callback”) с JSON объектом, сформированным по следующему принципу:

.. code-block:: json

    {
        “action”: <код запроса>,
        <поля, определяемые конкретным запросом>
    }

Ответ представляет собой JSON объект следующего вида:

.. code-block:: json

    {
        “status”: <код статуса>,
        <поля, определяемые конкретным запросом и статусом>
    }

Каждый запрос описывается в отдельном разделе.
Заголовок раздела имеет вид "<название запроса> (<код запроса>)".
Описание запроса состоит из трёх секций:

Формат запроса
    Описание всех поддерживаемых запросом полей.

Формат ответа
    Описание всех полей, возвращаемых в ответ на успешно выполненный запрос (status: 0k).

Коды ошибок
    Описание специфичных для данного запроса ошибок.

Общие коды статуса:

+--------------------+----------------------------------------------------------------------+
|        Код         |                             Комментарий                              |
+====================+======================================================================+
| ok                 | Запрос был успешно выполнен.                                         |
+--------------------+----------------------------------------------------------------------+
| malformed_request  | Запрос не соответствует установленному формату.                      |
|                    | Сервер может вернуть список полей, нарушающих формат, в поле fields. |
+--------------------+----------------------------------------------------------------------+
| unsupported_action | Указанное действие не поддерживается.                                |
+--------------------+----------------------------------------------------------------------+


Формат событий
------------------------

Сообщение, переданное по двухстороннему каналу связи (например, WebSocket), называется событием и представляет собой JSON объект следующего вида:

.. code-block:: json

    {
        "event”: <код события>,
        <поля, определяемые конкретным событием>
    }

Каждое событие описывается в отдельном разделе.
Заголовок раздела имеет вид "<название события> (<код события>)".
Все поддерживаемые поля описываются в секции "Формат".


Получение списка доступных расширений (extensions)
--------------------------------------------------

Формат ответа:

+------------+-----+-------------------------------------------------+-------------+
|    Поле    | Тип |                      Формат                     | Комментарий |
+============+=====+=================================================+=============+
| extensions | map | Ключ - название расширения.                     |             |
|            |     | Значение - определяется конкретным расширением. |             |
+------------+-----+-------------------------------------------------+-------------+
